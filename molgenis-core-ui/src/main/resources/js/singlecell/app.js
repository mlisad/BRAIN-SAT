webpackJsonp([1],{102:function(t,e,n){var a=n(5)(n(103),n(136),null,null,null);t.exports=a.exports},103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(104),o=n.n(a);e.default={name:"molgenis-app",components:{HomePage:o.a}}},104:function(t,e,n){var a=n(5)(n(105),n(135),null,null,null);t.exports=a.exports},105:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(106),o=n.n(a),r=n(124),s=n.n(r),i=n(51),c=n.n(i),l=n(52),u=n.n(l);e.default={name:"home-page",components:{ParameterForm:o.a,Plot:s.a,PieChart:c.a,Histogram:u.a}}},106:function(t,e,n){function a(t){n(107)}var o=n(5)(n(109),n(123),a,null,null);t.exports=o.exports},107:function(t,e){},109:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(20),o=n.n(a),r=n(23),s=n(21),i=n(115),c=n(9),l=n(119),u=n.n(l);e.default={name:"parameter-form",components:{Typeahead:u.a},computed:o()({},Object(c.c)(["genes"])),beforeCreate:function(){var t=this;this.selected=null,this.gene="",this.$store.dispatch(r.c).then(function(){t.createObject()})},data:function(){return{selected:null,options:[],gene:this.selected,study:""}},watch:{selected:function(t){""!==t&&(this.gene=this.options[t].text)},gene:function(t){var e=this;""!==t?this.$store.dispatch(r.a,t).then(function(){var t=e.$store.state.data.alpha||{};e.$store.commit(s.a,i.a.calculateOpacity(t))}):this.$store.commit(s.a,1)}},methods:{createObject:function(){for(var t=0;t<this.genes.length;t++){var e={};e.id=t,e.text=this.genes[t],this.options.push(e)}}}}},115:function(t,e,n){"use strict";var a=n(30),o=n.n(a),r=function(t){var e={};for(var n in t){var a=t[n];"probes"!==n&&"geneSym"!==n&&"_href"!==n&&(e[n]=a)}var r=o()(e).map(function(t){return e[t]}),s=Math.max.apply(null,r),i={};for(var c in e){var l=e[c],u=l/s;u<.2&&(u=.2),i[c]=u}return i},s=function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})};e.a={calculateOpacity:r,capitalizeEachWord:s}},119:function(t,e,n){function a(t){n(120)}var o=n(5)(n(121),n(122),a,null,null);t.exports=o.exports},120:function(t,e){},121:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{options:{type:Array,default:function(){return[]}},value:{type:[String,Number],default:null}},data:function(){return{open:!1,selectIndex:0,displayText:"",search:"",character:!1}},watch:{search:function(t){t.length>=3?this.character=!0:this.character=!1}},computed:{typeaheadState:function(){return this.open?"typeahead typeahead__open":"typeahead"},filteredOptions:function(){var t=new RegExp(this.search,"i");return this.options.filter(function(e){return t.test(e.id)||t.test(e.text)})}},methods:{onDownKey:function(){this.filteredOptions.length-1>this.selectIndex&&this.selectIndex++},onUpKey:function(){this.selectIndex>0&&this.selectIndex--},onEnterKey:function(){var t=this.filteredOptions[this.selectIndex];t&&this.select(t)},select:function(t){this.displayText=t.text,this.$emit("input",t.id),this.$refs.search.blur()},toggle:function(t){t.target!==this.$refs.toggle&&t.target!==this.$refs.search&&t.target!==this.$refs.text||(this.open?t.target!==this.$refs.search&&t.target!==this.$refs.text&&this.$refs.search.blur():this.$refs.search.focus())},onFocus:function(){this.open=!0},onBlur:function(){this.search="",this.open=!1},onEscape:function(){this.$refs.search.blur()}}}},122:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-8",attrs:{id:"chosenGene"}},[n("h2",[n("span",{ref:"text",staticClass:"typeahead__text"},[n("b",[t._v(t._s(t.displayText))])])])]),t._v(" "),n("div",{staticClass:"col-md-4 typeaheadState"},[n("div",{ref:"toggle",staticClass:"typeahead__toggle panel-body",on:{mousedown:function(e){e.preventDefault(),t.toggle(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"search",staticClass:"typeahead__search col-md-4 input-group pull-right",attrs:{type:"text"},domProps:{value:t.search},on:{focus:t.onFocus,blur:t.onBlur,keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key))return null;t.onEscape(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key))return null;t.onDownKey(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key))return null;t.onUpKey(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.onEnterKey(e)}],input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),t.character?n("ul",{ref:"list",staticClass:"typeahead__list"},t._l(t.filteredOptions,function(e,a){return n("li",{key:a,staticClass:"typeahead__item"},[n("a",{staticClass:"typeahead__link",class:[t.selectIndex===a?"typeahead__active":""],on:{mousedown:function(n){n.preventDefault(),t.select(e)}}},[t._v("\n            "+t._s(e.text)+"\n          ")])])})):t._e()]),t._v(" "),n("hr")])},staticRenderFns:[]}},123:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"inputs"}},[n("typeahead",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},staticRenderFns:[]}},124:function(t,e,n){var a=n(5)(n(125),n(134),null,null,null);t.exports=a.exports},125:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(31),o=n.n(a),r=n(30),s=n.n(r),i=n(20),c=n.n(i),l=n(32),u=n.n(l),p=n(23),d=n(9),h=n(51),f=n.n(h),_=n(52),v=n.n(_),m=n(133),g=n.n(m);e.default={name:"vue-plot",template:"<div></div>",computed:c()({},Object(d.b)({plot:"getPlotData"}),Object(d.c)(["opacity"])),data:function(){return{loading:!0,testPlotData:""}},components:{Spinner:g.a},watch:{opacity:function(t){this.createPlot(t)}},mounted:function(){var t=this;this.$store.dispatch(p.b).then(function(){if(""!==t.plot){var e=t.plot.split("V5")[1];t.testPlotData=e}t.createPlot(1)})},methods:{createPlot:function(t){this.loading=!0;for(var e=this.testPlotData,n=e.trim().split(/[ ,\n"]+/),a=[],r=[],i=[],c=[],l=[],p=[],d=[],h=[],_=[],m=0,g=0;g<n.length;g++)6===m?m=0:1===m?r.push(parseFloat(n[g])):2===m?i.push(parseFloat(n[g])):3===m?(c.includes(parseInt(n[g]))||d.push(parseInt(n[g])),c.push(parseInt(n[g]))):4===m?l.push(n[g]):5===m&&(p.push(n[g]),h.includes(n[g])||h.push(n[g])),m+=1;for(var y=0;y<s()(t).length;y++){for(var b=[],x=0;x<l.length;x++)s()(t)[y]===l[x]&&b.push(o()(t)[y]);_.push(b[0])}var C=d.length,P=[],w=[];for(var O in d){for(var E=d[O],S=parseInt(O),T=h[S],j=[],$=[],I=[],A=[],k=-1,D=u.a.d3.range(20).map(u.a.d3.scale.category20());-1!==(k=c.indexOf(E,k+1));)j.push(r[k]),$.push(i[k]),I.push(l[k]),A.push(_[k]);a.push(j.length),P.push(T),w.push({x:j,y:$,mode:"markers",type:"scatter",name:T.split("_").join(" ").trim(),text:I,hoverinfo:"x+y+text",marker:{size:12,color:D[O],opacity:A}})}var L={showLink:!1,displaylogo:!1,modeBarButtonsToRemove:["zoom2d","select2d","pan","pan2d","lasso2d","autoScale2d","sendDataToCloud","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian","zoomIn2d","zoomOut2d","resetScale2d","hoverClosestPie"]},F={showlegend:!0,xaxis:{title:"tSNE dim 1"},yaxis:{title:"tSNE dim 2"},legend:{orientation:"h",fullWidth:!0,xanchor:"center",x:.5,y:-.3},hovermode:"closest",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!1,width:document.getElementById("tSNEplot").parentElement.clientWidth-30,margin:{b:100,t:100}};if(u.a.newPlot("tSNEplot",w,F,L),this.loading=!1,1!==t){var N=this.$store.state.data.alpha||{};f.a.methods.createChart(P,a,N,p,L),v.a.methods.createHist(P,C,N,p,L)}}}}},129:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(30),o=n.n(a),r=n(31),s=n.n(r),i=n(20),c=n.n(i),l=n(32),u=n.n(l),p=n(9);e.default={name:"vue-chart",template:"<div></div>",computed:c()({},Object(p.b)({plot:"getPlotData"}),Object(p.c)(["opacity"])),methods:{createChart:function(t,e,n,a,r){delete n._href,delete n.probes,delete n.geneSym;for(var i={},c=[],l=0;l<t.length;l++){for(var p=0,d=0;d<a.length;d++)t[l]===a[d]&&(p+=s()(n)[d]);i[t[l]]=p,c.push(t[l].split("_").join(" ").trim())}for(var h=[],f=0;f<t.length;f++)if(t[f]===o()(i)[f]){var _=s()(i)[f]/e[f];h.push(_)}var v=[{values:h,labels:c,type:"pie",sort:!1,hoverinfo:"label+percent"}],m={height:400,showlegend:!1,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",legend:{orientation:"h",xanchor:"center",y:1.2,x:.5}};u.a.newPlot("pieChart",v,m,r)}}}},130:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"col-md-offset-6",staticStyle:{height:"400px"},attrs:{id:"pieChart"}})},staticRenderFns:[]}},131:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(31),o=n.n(a),r=n(20),s=n.n(r),i=n(32),c=n.n(i),l=n(9);e.default={name:"histogram",template:"<div></div>",computed:s()({},Object(l.b)({plot:"getPlotData"}),Object(l.c)(["opacity"])),methods:{createHist:function(t,e,n,a,r){delete n._href,delete n.probes,delete n.geneSym;for(var s=[],i=0;i<t.length;i++){for(var l=[],u=0;u<a.length;u++)t[i]===a[u]&&l.push(o()(n)[u]);s.push(l)}for(var p={},d=[],h=0;h<t.length;h++){for(var f=0,_=0;_<a.length;_++)t[h]===a[_]&&(f+=o()(n)[_]);p[t[h]]=f,d.push(t[h].split("_").join(" ").trim())}for(var v=0;v<t.length;v++)t[v]=t[v].split("_").join(" ").trim();for(var m=[],g=0;g<s.length;g++){var y=s[g];m.push({y:y,type:"box",name:t[g],hoverinfo:"y",boxpoints:"overallAvg"})}var b={hovermode:"closest",showlegend:!1,barmode:"group",yaxis:{title:"CPM expression level"},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)"};c.a.newPlot("histogram",m,b,r)}}}},132:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"col-md-6",staticStyle:{height:"400px"},attrs:{id:"histogram"}})},staticRenderFns:[]}},134:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"}},[t.loading?n("div",[n("Spinner",{attrs:{message:"Loading...",size:"55","line-fg-color":"#519ABC"}})],1):t._e(),t._v(" "),n("div",{staticClass:"col-md-12",staticStyle:{height:"370px"},attrs:{id:"tSNEplot"}})])},staticRenderFns:[]}},135:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"well",attrs:{id:"singleCellWell"}},[n("div",{staticClass:"homepage row"},[n("div",[n("parameter-form")],1),t._v(" "),n("plot")],1),t._v(" "),n("div",{staticClass:"homepage row"},[n("histogram"),t._v(" "),n("pie-chart")],1)])},staticRenderFns:[]}},136:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("home-page")],1)},staticRenderFns:[]}},137:function(t,e){},138:function(t,e){},21:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return l});var a,o=n(35),r=n.n(o),s="__SET_OPACITY__",i="__SET_PLOT_DATA__",c="__SET_PLOT_ALPHA__",l="__SET_PLOT_GENES__";e.e=(a={},r()(a,s,function(t,e){t.opacity=e}),r()(a,i,function(t,e){t.data.plot=e}),r()(a,c,function(t,e){t.data.alpha=e}),r()(a,l,function(t,e){t.genes=e}),a)},23:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"c",function(){return u});var a,o=n(35),r=n.n(o),s=n(67),i=n(21),c="__GET_PLOT_DATA__",l="__GET_PLOT_ALPHA__",u="__GET_PLOT_GENES__",p=[];e.d=(a={},r()(a,c,function(t){var e=t.commit,n=window.__INITIAL_STATE__;return Object(s.a)("/scripts/singleCellAnalysis/run?entityName=base_"+n+"&targetFile=base_"+n+"Targets").then(function(t){return t.text().then(function(t){e(i.c,t)})},function(t){console.log(t)})}),r()(a,u,function(t){var e=t.commit,n=window.__INITIAL_STATE__;return Object(s.a)("/api/v2/base_"+n+"?num=10000").then(function(t){for(var n=t.items,a=0;a<n.length;a++)p.push(n[a].geneSym);e(i.d,p)},function(t){console.log(t)})}),r()(a,l,function(t,e){var n=t.commit,a=window.__INITIAL_STATE__;return Object(s.a)("/api/v2/base_"+a+"?q=geneSym=="+e).then(function(t){n(i.b,t.items[0])},function(t){console.log(t)})}),a)},51:function(t,e,n){var a=n(5)(n(129),n(130),null,null,null);t.exports=a.exports},52:function(t,e,n){var a=n(5)(n(131),n(132),null,null,null);t.exports=a.exports},53:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(54),o=(n.n(a),n(34)),r=n.n(o),s=n(59),i=n(102),c=n.n(i),l=n(137),u=(n.n(l),n(138));n.n(u);new r.a({el:"#app",store:s.a,template:"<App />",components:{App:c.a}})},56:function(t,e){},59:function(t,e,n){"use strict";var a=n(34),o=n.n(a),r=n(9),s=n(60),i=n(21),c=n(66),l=n(23);o.a.use(r.a),e.a=new r.a.Store({state:s.a,mutations:i.e,actions:l.d,getters:c.a,strict:!1})},60:function(t,e,n){"use strict";var a={opacity:[],data:{plot:{},alpha:{}},genes:[]};e.a=a},66:function(t,e,n){"use strict";e.a={getPlotData:function(t){return t.data.plot&&t.data.plot}}}},[53]);